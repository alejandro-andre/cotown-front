<app-spinner-control *ngIf="isLoading"></app-spinner-control>

<h1>Informes</h1>

<!-- Cabecera -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute head"><span>Ejecutar</span></div>
  <div class="pure-u-1-4 name head"><span>Informe</span></div>
  <div class="pure-u-1-2 name head"><span>Filtros</span></div>
</div>

<!-- Propietarios -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute" *ngIf="providers && providers.length > 1">
    <button mat-raised-button color="primary" (click)="execute('propietarios')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Propietarios</span></div>
</div>

<!-- Edificios -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute" *ngIf="providers">
    <button mat-raised-button color="primary" (click)="execute('edificios')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Edificios</span></div>
</div>

<!-- Recursos -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute"  *ngIf="providers && providers.length > 1">
    <button mat-raised-button color="primary" (click)="execute('recursos')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Recursos, precios y tarifas</span></div>
</div>

<!-- Precios -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" (click)="execute('precios')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Precios</span></div>
</div>

<!-- Weekly report -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('weekly')"
            (click)="execute('weekly')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Reservas Power BI</span></div>
</div>

<!-- Occupancy report -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('occupancy')"
            (click)="execute('occupancy')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Monthly</span></div>
  <div class="pure-u-16-24 name"><span>Beds / Occupancy / Income</span></div>
</div>

<!-- Rooming lists -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('rooming')" 
            (click)="execute('rooming')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Rooming list</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Reserva</mat-label>
      <input matInput [formControl]="bookingIdControl" placeholder="Id">
    </mat-form-field>
  </div>
</div>

<!-- Reservas -->
<div class="pure-g row" *ngIf="providers">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('reservas')"
            (click)="execute('reservas')">Ejecutar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Reservas</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Rango de fechas</mat-label>
      <mat-date-range-input [rangePicker]="bookingpicker" [formGroup]="bookingDateControl">
      <input matStartDate formControlName="start" placeholder="Desde">
      <input matEndDate formControlName="end" placeholder="Hasta">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="bookingpicker"></mat-datepicker-toggle>
      <mat-date-range-picker #bookingpicker></mat-date-range-picker>
  </mat-form-field>
  </div>
</div>

<!-- Pagos -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('pagos')"
            (click)="execute('pagos')">Ejecutar</button>
  </div>
  <div class="pure-u-1-4 name"><span>Pagos</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Rango de fechas</mat-label>
      <mat-date-range-input [rangePicker]="paymentpicker" [formGroup]="paymentDateControl">
      <input matStartDate formControlName="start" placeholder="Desde">
      <input matEndDate formControlName="end" placeholder="Hasta">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="paymentpicker"></mat-datepicker-toggle>
      <mat-date-range-picker #paymentpicker></mat-date-range-picker>
  </mat-form-field>
  </div>
  <div class="pure-u-10-24">
    <mat-form-field>
      <mat-label>Emisor</mat-label>
      <mat-select [formControl]="providerControl">
        <mat-option [value]="0">Todos</mat-option>
        <mat-option *ngFor="let c of providers" [value]="c.id">{{ c.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

<!-- Ingresos -->
<div class="pure-g row" *ngIf="providers">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('ingresos')"
            (click)="execute('ingresos')">Ejecutar</button>
  </div>
  <div class="pure-u-1-4 name"><span>Ingresos</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Rango de fechas</mat-label>
      <mat-date-range-input [rangePicker]="incomepicker" [formGroup]="incomeDateControl">
      <input matStartDate formControlName="start" placeholder="Desde">
      <input matEndDate formControlName="end" placeholder="Hasta">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="incomepicker"></mat-datepicker-toggle>
      <mat-date-range-picker #incomepicker></mat-date-range-picker>
  </mat-form-field>
  </div>
  <div class="pure-u-10-24">
    <mat-form-field>
      <mat-label>Emisor</mat-label>
      <mat-select [formControl]="providerControl">
        <mat-option *ngIf="providers && providers.length > 1" [value]="0">Todos</mat-option>
        <mat-option *ngFor="let c of providers" [value]="c.id">{{ c.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

<!-- Facturas -->
<div class="pure-g row" *ngIf="providers && providers.length > 1">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('facturas')"
            (click)="execute('facturas')">Ejecutar</button>
  </div>
  <div class="pure-u-1-4 name"><span>Facturas (SAP)</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Mes y año</mat-label>
      <input matInput 
              MonthYearPickerFormat="MM/YYYY" 
              [matDatepicker]="dpbill" 
              [formControl]="billDateControl">
      <mat-datepicker-toggle matIconSuffix [for]="dpbill"></mat-datepicker-toggle>
      <mat-datepicker #dpbill (monthSelected)="setMonthAndYear($event, dpbill, billDateControl)" startView="multi-year"></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="pure-u-10-24">
    <mat-form-field>
      <mat-label>Emisor</mat-label>
      <mat-select [formControl]="providerControl">
        <mat-option [value]="0">Todos</mat-option>
        <mat-option *ngFor="let c of providers" [value]="c.id">{{ c.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

<div *ngIf="providers && providers.length > 1">

<h1>Descargas (zip)</h1>

<!-- Cabecera -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute head"><span>Ejecutar</span></div>
  <div class="pure-u-1-4 name head"><span>Ficheros</span></div>
  <div class="pure-u-1-2 head"><span>Filtros</span></div>
</div>

<!-- Contratos -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('downloadcontratos')"
            (click)="execute('downloadcontratos')">Descargar</button>
  </div>
  <div class="pure-u-7-8 name"><span>Contratos (PDFs)</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Rango de fechas</mat-label>
      <mat-date-range-input [rangePicker]="contractpicker" [formGroup]="contractDateControl">
      <input matStartDate formControlName="start" placeholder="Desde">
      <input matEndDate formControlName="end" placeholder="Hasta">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="contractpicker"></mat-datepicker-toggle>
      <mat-date-range-picker #contractpicker></mat-date-range-picker>
  </mat-form-field>
  </div>
  <div class="pure-u-10-24">
    <mat-form-field>
      <mat-label>Emisor</mat-label>
      <mat-select [formControl]="providerControl">
        <mat-option [value]="0">Todos</mat-option>
        <mat-option *ngFor="let c of providers" [value]="c.id">{{ c.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

<!-- Facturas -->
<div class="pure-g row">
  <div class="pure-u-1-8 execute">
    <button mat-raised-button color="primary" [disabled]="check('downloadfacturas')"
            (click)="execute('downloadfacturas')">Descargar</button>
  </div>
  <div class="pure-u-1-4 name"><span>Facturas (PDFs)</span></div>
  <div class="pure-u-6-24">
    <mat-form-field>
      <mat-label>Mes y año</mat-label>
      <input matInput 
              MonthYearPickerFormat="MM/YYYY" 
              [matDatepicker]="dpbilldownload" 
              [formControl]="billDownloadDateControl">
      <mat-datepicker-toggle matIconSuffix [for]="dpbilldownload"></mat-datepicker-toggle>
      <mat-datepicker #dpbilldownload (monthSelected)="setMonthAndYear($event, dpbilldownload, billDownloadDateControl)" startView="multi-year"></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="pure-u-10-24">
    <mat-form-field>
      <mat-label>Emisor</mat-label>
      <mat-select [formControl]="providerControl">
        <mat-option [value]="0">Todos</mat-option>
        <mat-option *ngFor="let c of providers" [value]="c.id">{{ c.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</div>

</div>