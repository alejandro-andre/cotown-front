<div class="container">

	<h1>Planning</h1>

	<div class="nav_container">
		<form class="selectors_container airflows_container_selectors ">
			<mat-form-field
				class="cotown_selector"
				appearance="fill"
				style="margin-right: 10px;"
			>
				<mat-label class="cotown_label">{{ 'city' | translate }}</mat-label>
				<mat-select
          [(ngModel)]="selectedCity"
          name="cities"
          (selectionChange)="onSelectCity()"
        >
				<mat-option  [value]=-1>{{ 'all' | translate }}</mat-option>
					<mat-option
						*ngFor="let citie of cities"
						[value]="citie.id"
					>
						{{ citie.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>

			<mat-form-field appearance="fill" style="margin-right: 10px;">
				<mat-label>{{ 'building' | translate}}</mat-label>
				<mat-select
          [(ngModel)]="selectedBuildingId"
          name="buildings"
          (selectionChange)="onSelectBulding()"
        >
					<mat-option  [value]=-1>{{ 'allM' | translate }}</mat-option>
					<mat-option
						*ngFor="let building of buildings"
						[value]="building.id"
					>
						{{ building.name }}
					</mat-option>
				</mat-select>
			</mat-form-field>

      <mat-form-field appearance="fill" style="margin-right: 10px;">
				<mat-label>{{ 'types' | translate }}</mat-label>
				<mat-select
          [(ngModel)]="selectedResouceTypeId"
          name="resourcesTypes"
          (selectionChange)="onSelectResourceType()"
					[disabled]="!resourceTypes.length"
        >
				<mat-option  [value]="-1">{{ 'allM' | translate }}</mat-option>
					<mat-option
						*ngFor="let resourceType of resourceTypes"
						[value]="resourceType.id"
					>
						{{ resourceType.code }}
					</mat-option>
				</mat-select>
			</mat-form-field>

			<mat-form-field appearance="fill">
				<mat-label>{{ 'date range' | translate }}</mat-label>
				<mat-date-range-input
					[rangePicker]="picker"
					[disabled]="!bars.length"
					[formGroup]="range"
				>
					<input
						matStartDate
						formControlName="start"
						[placeholder]="'from' | translate"
					>
					<input
						matEndDate
						formControlName="end"
						[placeholder]="'to' | translate"
						(dateChange)="onDateChange()"
					>
				</mat-date-range-input>
				<mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
				<mat-date-range-picker #picker></mat-date-range-picker>
			</mat-form-field>
		</form>


		<div class="time_line_buttons">
			<button
				[disabled]="!bars.length"
				mat-raised-button
				color="primary"
				style="color:white"
				(click)="goBackward('month')"
			>
				<mat-icon aria-hidden="false" color="black" fontIcon="arrow_back"></mat-icon>
				{{ 'month' | translate }}
			</button>
			&nbsp;

			<button
				mat-raised-button
				[disabled]="!bars.length"
				color="primary"
				style="color:white"
				(click)="goBackward('week')"
			>
				<mat-icon aria-hidden="false" color="black" fontIcon="arrow_back"></mat-icon>
				{{ 'week' | translate }}
			</button>
			&nbsp;

			<button
				class="next-button "
				[disabled]="!bars.length"
				mat-raised-button
				color="primary"
				style="color:white"
				(click)="goForward('week')"
			>
				{{ 'week' | translate }}
				<mat-icon class="next-arow" aria-hidden="false" fontIcon="arrow_forward"></mat-icon>
			</button>
			&nbsp;

			<button
				class="next-button "
				[disabled]="!bars.length"
				mat-raised-button
				color="primary"
				style="color:white"
				(click)="goForward('month')"
			>
				{{ 'month' | translate }}
				<mat-icon class="next-arow" aria-hidden="false" fontIcon="arrow_forward"></mat-icon>
			</button>
		</div>
	</div>

	<div class="spinner-box" *ngIf="spinnerActive">
		<app-spinner-control></app-spinner-control>
	</div>

	<div *ngIf="bars.length">
		<app-time-chart-control
			[bars]="bars"
			[now]="now"
			[from]="initDate"
			[to]="endDate"
			(onSelectAvailable)="onSelectAvailable($event)"
		></app-time-chart-control>
	</div>
</div>