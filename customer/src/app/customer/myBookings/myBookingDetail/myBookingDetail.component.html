<div>
  <h2>Booking Detail </h2>

  <ng-container *ngIf="booking && booking.id && !showNotFound;  then showData; else showNotData">
  </ng-container>

  <ng-template #showData>
    <div class="box-content">
      <p>
        <mat-form-field>
          <mat-label>Estado</mat-label>
          <input
            matInput
            placeholder="Estado"
            [(ngModel)]="booking.status"
          >
        </mat-form-field>
      </p>
      <p>
        <mat-form-field>
          <mat-label>Pagador</mat-label>
          <input
            matInput
            placeholder="Pagador"
            [(ngModel)]="booking.payer.name"
          >
        </mat-form-field>
      </p>

      <p>
        Fechas:

        <mat-form-field>
          <mat-label>Fecha desde</mat-label>
          <input
            matInput
            placeholder="Fecha desde"
            [(ngModel)]="booking.start"
            readonly
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Fecha hasta</mat-label>
          <input
            matInput
            placeholder="Fecha hasta"
            [(ngModel)]="booking.end"
            readonly
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Pagador</mat-label>
          <input
            matInput
            placeholder="Fecha solicitud"
            [(ngModel)]="booking.request_date"
            readonly
          >
        </mat-form-field>
        <mat-form-field>
          <mat-label>Valido hasta</mat-label>
          <input
            matInput
            placeholder="Valido hasta"
            [(ngModel)]="booking.expiry_date"
            readonly
          >
        </mat-form-field>


        <mat-form-field>
          <mat-label>Fecha de confirmacion</mat-label>
          <input
            matInput
            placeholder="dd/mm/yyyy"
            [(ngModel)]="booking.confirmation_date"
            readonly
          >
        </mat-form-field>
      </p>
      <p>
        solicitud
      </p>
      <p>

        <mat-form-field>
          <mat-label>Edificio: </mat-label>
          <input
            matInput
            placeholder="Edificio"
            readonly
            [value]="buildingName"
          >
        </mat-form-field>

        <mat-form-field>
          <mat-label>Tipo de recurso</mat-label>
          <input
            matInput
            placeholder="Tipo de recurso"
            [ngModel]="booking.resource_type"
            readonly
          >
        </mat-form-field>
      </p>
      <p>
        <mat-form-field>
          <mat-label>Tipo de psio</mat-label>
          <input
            matInput
            placeholder="Tipo de piso"
            [ngModel]="flatTypeName"
            readonly
          >
        </mat-form-field>

        <mat-form-field>
          <mat-label>Tipo de plaza</mat-label>
          <input
            matInput
            placeholder="Tipo de plaza"
            [ngModel]="placeTypeName"
            readonly
          >
        </mat-form-field>
      </p>

      <p>
        <mat-form-field>
          <mat-label>Motivo de estancia</mat-label>
          <input
            matInput
            placeholder="Motivo de estancia"
            [ngModel]="booking.reason?.name || ''"
            readonly
          >
        </mat-form-field>

        <mat-form-field>
          <mat-label>Escuela/Empresa</mat-label>
          <input
            matInput
            placeholder="Escuela/Empresa"
            [ngModel]="booking.school?.name || ''"
            readonly
          >
        </mat-form-field>
      </p>

      <p>
        Alternativas
      </p>

      <p>
        Sección aún por definir
      </p>

      <p>
        RESERVA
      </p>
      <p>
        <mat-form-field>
          <mat-label>Recurso</mat-label>
          <input
            matInput
            placeholder="Recurso"
            [ngModel]="booking.resource?.code || ''"
            readonly
          >
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Desde</mat-label>
          <input
            matInput
            [matDatepicker]="pickerFrom"
            [formControl]="customerService.customer.formControl"
          >
          <mat-datepicker-toggle matIconSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Hasta</mat-label>
          <input
            matInput
            [matDatepicker]="pickerTo"
            [formControl]="customerService.customer.formControl"
          >
          <mat-datepicker-toggle matIconSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </mat-form-field>

      </p>

      <p>
        Precios
      </p>

      <p>
        <mat-form-field>
        <mat-label>Renta</mat-label>
        <input
          matInput
          placeholder="Renta"
          [ngModel]="booking.rent "
          readonly
        >
      </mat-form-field>
      <mat-form-field>
        <mat-label>Servicios</mat-label>
        <input
          matInput
          placeholder="Servicis"
          [ngModel]="booking.services "
          readonly
        >
      </mat-form-field>
      <mat-form-field>
        <mat-label>Limite de consumo</mat-label>
        <input
          matInput
          placeholder="Limite de consumo"
          [ngModel]="booking.limit "
          readonly
        >
      </mat-form-field>
      <mat-form-field>
        <mat-label>Garantía teórica</mat-label>
        <input
          matInput
          placeholder="Garantía teórica"
          [ngModel]="booking.deposit "
          readonly
        >
      </mat-form-field>
      </p>

      <!--Table of prices -->
      <table style="margin-bottom: 10px;" mat-table *ngIf="booking.price_list && booking.price_list.length" [dataSource]="booking.price_list" class="mat-elevation-z8">
        <ng-container [matColumnDef]="col.header" *ngFor="let col of tableFormat" >
          <th mat-header-cell *matHeaderCellDef>{{ col.name }}</th>
          <td mat-cell *matCellDef="let element"> {{ element[col.property]}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

    </div>
  </ng-template>

  <ng-template #showNotData>
    No se ha encontrado ningún booking con ese id
  </ng-template>
</div>