<h1>{{ 'bookings' | translate }}</h1>

<div *ngIf="bookings.length; then thenBlock else elseBlock"></div>

<ng-template #thenBlock>

  <div style="border: 1px solid lightgray; overflow-x: auto;">

    <table mat-table *ngIf="bookings && bookings.length" [dataSource]="bookings" class="table">
      <ng-container matColumnDef="info">
        <th mat-header-cell *matHeaderCellDef>{{ 'info' | translate}}</th>
        <td mat-cell *matCellDef="let element">
          <tr class="info"><th>{{ 'building' | translate}}</th><td>{{ element.building.code }}</td></tr>
          <tr class="info"><th>{{ 'date_from' | translate}}</th><td>{{ formatDate(element.date_from) }}</td></tr>
          <tr class="info"><th>{{ 'date_to' | translate}}</th><td>{{ formatDate(element.date_to) }}</td></tr>
          <tr class="info"><th>{{ 'status' | translate}}</th><td>{{ getStatus(element.status) }}</td></tr>
          <tr class="info"><th>{{ 'resource_type' | translate}}</th><td>{{ getResourceType(element.resource_type) }}</td></tr>
          <tr class="info"><th>{{ 'flat_type' | translate}}</th><td>{{ getName(element.flat_type) }}</td></tr>
          <tr class="info"><th>{{ 'place_type' | translate}}</th><td>{{ getName(element.place_type) }}</td></tr>
          <tr class="info"><th>{{ 'resource' | translate}}</th><td>{{ element.resource?.code || '-' }}</td></tr>
        </td>
      </ng-container>
      <ng-container matColumnDef="building">
        <th mat-header-cell *matHeaderCellDef>{{ 'building' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ element.building.code }}</span></td>
      </ng-container>
      <ng-container matColumnDef="resource">
        <th mat-header-cell *matHeaderCellDef>{{ 'resource' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ element.resource?.code }}</span></td>
      </ng-container>
      <ng-container matColumnDef="date_from">
        <th mat-header-cell *matHeaderCellDef>{{ 'date_from' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ formatDate(element.date_from) }}</span></td>
      </ng-container>
      <ng-container matColumnDef="date_to">
        <th mat-header-cell *matHeaderCellDef>{{ 'date_to' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ formatDate(element.date_to) }}</span></td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>{{ 'status' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ getStatus(element.status) }}</span></td>
      </ng-container>
      <ng-container matColumnDef="resource_type">
        <th mat-header-cell *matHeaderCellDef>{{ 'resource_type' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ getResourceType(element.resource_type) }}</span></td>
      </ng-container>
      <ng-container matColumnDef="flat_type">
        <th mat-header-cell *matHeaderCellDef>{{ 'flat_type' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ getName(element.flat_type) }}</span></td>
      </ng-container>
      <ng-container matColumnDef="place_type">
        <th mat-header-cell *matHeaderCellDef>{{ 'place_type' | translate}}</th>
        <td mat-cell *matCellDef="let element"><span>{{ getName(element.place_type) }}</span></td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="clickable" (click)="clickedRow(row)"></tr>
    </table>

  </div>
</ng-template>

<ng-template #elseBlock>
  <div>
    {{ 'errors.no_results' | translate }}
  </div>
</ng-template>